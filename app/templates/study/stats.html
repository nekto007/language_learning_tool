{% extends "base.html" %}

{% block title %}{{ _('Статистика изучения') }}{% endblock %}

{% block content %}
<div class="stats-page">

    <!-- Hero Section -->
    <div class="stats-hero">
        <div class="stats-hero__bg-shapes">
            <div class="shape shape--1"></div>
            <div class="shape shape--2"></div>
        </div>
        <div class="stats-hero__content">
            <div class="stats-hero__header">
                <div class="stats-hero__icon">
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V5a2 2 0 00-2-2H6a2 2 0 00-2 2v14a2 2 0 002 2z"/>
                    </svg>
                </div>
                <div>
                    <h1 class="stats-hero__title">{{ _('Статистика изучения') }}</h1>
                    <p class="stats-hero__subtitle">{{ _('Отслеживайте свой прогресс в изучении слов') }}</p>
                </div>
            </div>
            <a href="{{ url_for('study.index') }}" class="stats-hero__back-btn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                    <path d="M19 12H5m0 0l7 7m-7-7l7-7" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                {{ _('Назад к изучению') }}
            </a>
        </div>
    </div>

    <!-- Telegram Banner -->
    {% include 'partials/telegram_banner.html' %}

    <!-- Statistics Grid -->
    <div class="stats-grid slideUp" style="animation-delay: .1s">
        <div class="stats-card">
            <div class="stats-card__icon stats-card__icon--primary">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M4 7v10c0 2 1 3 3 3h10c2 0 3-1 3-3V7c0-2-1-3-3-3H7c-2 0-3 1-3 3z"/>
                    <path d="M14 2v4M10 2v4M4 9h16"/>
                </svg>
            </div>
            <div class="stats-card__value">{{ total_items }}</div>
            <div class="stats-card__label">{{ _('Слов в коллекции') }}</div>
        </div>

        <div class="stats-card">
            <div class="stats-card__icon stats-card__icon--success">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>
            <div class="stats-card__value">{{ mastered_items }}</div>
            <div class="stats-card__label">{{ _('Изученные слова') }}</div>
            <div class="stats-card__hint">{{ _('интервал') }} ≥ 30 {{ _('дней') }}</div>
        </div>

        <div class="stats-card">
            <div class="stats-card__icon stats-card__icon--info">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M13 10V3L4 14h7v7l9-11h-7z" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>
            <div class="stats-card__value">{{ mastery_percentage }}%</div>
            <div class="stats-card__label">{{ _('Уровень освоения') }}</div>
        </div>

        <div class="stats-card">
            <div class="stats-card__icon stats-card__icon--warning">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M9.879 16.121A3 3 0 1012.015 11L11 14H9c0 .768.293 1.536.879 2.121z" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>
            <div class="stats-card__value">{{ study_streak }}</div>
            <div class="stats-card__label">{{ _('Дней подряд') }}</div>
            <div class="stats-card__hint">{{ _('последовательно') }}</div>
        </div>
    </div>

    <!-- Recent Sessions -->
    <div class="stats-sessions slideUp" style="animation-delay: .2s">
        <div class="stats-sessions__header">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <h3 class="stats-sessions__title">{{ _('Последние сессии изучения') }}</h3>
        </div>

        {% if recent_sessions %}
        <div class="stats-sessions__table-wrap">
            <table class="stats-table">
                <thead>
                    <tr>
                        <th>{{ _('Дата и время') }}</th>
                        <th>{{ _('Тип') }}</th>
                        <th>{{ _('Изучено слов') }}</th>
                        <th>{{ _('Правильно/Неправильно') }}</th>
                        <th>{{ _('Производительность') }}</th>
                        <th>{{ _('Продолжительность') }}</th>
                    </tr>
                </thead>
                <tbody>
                    {% for session in recent_sessions %}
                    <tr>
                        <td>{{ session.start_time.strftime('%Y-%m-%d %H:%M') }}</td>
                        <td>
                            <span class="stats-table__type-badge">{{ session.session_type|capitalize }}</span>
                        </td>
                        <td>{{ session.words_studied }}</td>
                        <td>
                            <span class="stats-table__score">
                                <span class="stats-table__score--correct">{{ session.correct_answers }}</span>
                                /
                                <span class="stats-table__score--incorrect">{{ session.incorrect_answers }}</span>
                            </span>
                        </td>
                        <td>
                            <div class="stats-progress">
                                <div class="stats-progress__bar">
                                    <div class="stats-progress__fill {% if session.performance_percentage >= 80 %}stats-progress__fill--success{% elif session.performance_percentage >= 60 %}stats-progress__fill--warning{% else %}stats-progress__fill--danger{% endif %}"
                                         style="width: {{ session.performance_percentage }}%;">
                                    </div>
                                </div>
                                <span class="stats-progress__text">{{ session.performance_percentage }}%</span>
                            </div>
                        </td>
                        <td>{{ session.duration }} {{ _('мин') }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <div class="stats-sessions__empty">
            <div class="stats-sessions__empty-icon">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <path d="M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V5a2 2 0 00-2-2H6a2 2 0 00-2 2v14a2 2 0 002 2z"/>
                </svg>
            </div>
            <h4 class="stats-sessions__empty-title">{{ _('Начните изучение') }}</h4>
            <p class="stats-sessions__empty-text">{{ _('Завершите несколько сессий, чтобы увидеть свою статистику!') }}</p>
        </div>
        {% endif %}
    </div>

    <!-- Additional Information -->
    <div class="stats-info slideUp" style="animation-delay: .3s">
        <!-- SRS Method Card -->
        <div class="stats-info__card">
            <div class="stats-info__card-header">
                <div class="stats-info__card-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <h3 class="stats-info__card-title">{{ _('О методе интервального повторения') }}</h3>
            </div>
            <p class="stats-info__text">
                {{ _('Это приложение использует систему интервального повторения (похожую на Anki) для эффективного изучения словаря.') }}
            </p>

            <h5 class="stats-info__subtitle">{{ _('Как это работает:') }}</h5>
            <ul class="stats-info__list">
                <li class="stats-info__list-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--stats-primary)" stroke-width="2.5">
                        <path d="M5 13l4 4L19 7" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    {{ _('Хорошо известные слова показываются реже') }}
                </li>
                <li class="stats-info__list-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--stats-primary)" stroke-width="2.5">
                        <path d="M5 13l4 4L19 7" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    {{ _('Сложные слова появляются чаще') }}
                </li>
                <li class="stats-info__list-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--stats-primary)" stroke-width="2.5">
                        <path d="M5 13l4 4L19 7" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    {{ _('Интервалы между повторениями постепенно увеличиваются') }}
                </li>
                <li class="stats-info__list-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--stats-primary)" stroke-width="2.5">
                        <path d="M5 13l4 4L19 7" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    {{ _('Система адаптируется к вашим результатам') }}
                </li>
            </ul>

            <p class="stats-info__text">
                <strong>{{ _('Регулярное изучение') }}</strong> {{ _('является ключом к прогрессу. Даже 10-15 минут в день приведут к значительным улучшениям в вашем словарном запасе со временем.') }}
            </p>
        </div>

        <!-- Recommendations Card -->
        <div class="stats-info__card">
            <div class="stats-info__card-header">
                <div class="stats-info__card-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <h3 class="stats-info__card-title">{{ _('Рекомендации по изучению') }}</h3>
            </div>
            <h5 class="stats-info__subtitle">{{ _('На основе вашей статистики:') }}</h5>

            {% if total_items > 0 %}
                {% if mastery_percentage < 30 %}
                <div class="stats-alert stats-alert--warning">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>{{ _('Вы только начинаете! Сосредоточьтесь на изучении нескольких слов за раз и регулярном повторении.') }}</span>
                </div>
                {% elif mastery_percentage < 70 %}
                <div class="stats-alert stats-alert--info">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>{{ _('Вы делаете хорошие успехи! Продолжайте регулярные повторения и постепенно добавляйте новые слова.') }}</span>
                </div>
                {% else %}
                <div class="stats-alert stats-alert--success">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>{{ _('Отличная работа! Вы освоили большую часть своей коллекции. Подумайте о добавлении более сложных слов.') }}</span>
                </div>
                {% endif %}
            {% else %}
            <div class="stats-alert stats-alert--info">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>{{ _('Начните добавлять слова в свою коллекцию для получения персонализированных рекомендаций.') }}</span>
            </div>
            {% endif %}

            <h5 class="stats-info__subtitle stats-info__subtitle--spaced">{{ _('Следующие шаги:') }}</h5>
            <div class="stats-actions">
                <a href="{{ url_for('study.cards', word_source='due', max_words=20) }}" class="stats-actions__btn stats-actions__btn--primary">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    {{ _('Повторить слова') }}
                </a>
                <a href="{{ url_for('words.word_list') }}" class="stats-actions__btn stats-actions__btn--success">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                        <path d="M12 5v14M5 12h14" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    {{ _('Добавить слова для изучения') }}
                </a>
            </div>
        </div>
    </div>
</div>

<style>

/* === Page Container === */
.stats-page {
    --stats-font: 'Onest', -apple-system, BlinkMacSystemFont, sans-serif;
    --stats-primary: #f59e0b;
    --stats-primary-dark: #d97706;
    --stats-gradient: linear-gradient(135deg, #f59e0b 0%, #ef4444 100%);
    --stats-surface: #ffffff;
    --stats-surface-alt: #f8fafc;
    --stats-text: #0f172a;
    --stats-text-muted: #64748b;
    --stats-border: #e2e8f0;
    --stats-radius: 16px;
    --stats-radius-sm: 10px;
    --stats-success: #10b981;
    --stats-info: #3b82f6;
    --stats-warning: #f59e0b;
    --stats-danger: #ef4444;
    font-family: var(--stats-font);
    max-width: 900px;
    margin: 0 auto;
    padding: 0 1rem 3rem;
}

/* === Hero Section === */
.stats-hero {
    position: relative;
    background: var(--stats-gradient);
    border-radius: var(--stats-radius);
    padding: 1.5rem;
    margin-bottom: 1.5rem;
    overflow: hidden;
    color: white;
    animation: stats-slideUp 0.4s ease-out;
}

.stats-hero__bg-shapes {
    position: absolute;
    inset: 0;
    overflow: hidden;
    pointer-events: none;
}

.stats-hero .shape {
    position: absolute;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.1);
}

.stats-hero .shape--1 {
    width: 150px;
    height: 150px;
    top: -50px;
    right: -30px;
    animation: stats-float-1 18s ease-in-out infinite;
}

.stats-hero .shape--2 {
    width: 80px;
    height: 80px;
    bottom: -30px;
    left: 10%;
    animation: stats-float-2 14s ease-in-out infinite;
}

@keyframes stats-float-1 {
    0%, 100% { transform: translate(0, 0) scale(1); }
    50% { transform: translate(-15px, 15px) scale(1.05); }
}

@keyframes stats-float-2 {
    0%, 100% { transform: translate(0, 0) rotate(0deg); }
    50% { transform: translate(20px, -15px) rotate(8deg); }
}

.stats-hero__content {
    position: relative;
    z-index: 1;
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 1rem;
}

.stats-hero__header {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.stats-hero__icon {
    width: 52px;
    height: 52px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(10px);
}

.stats-hero__title {
    font-size: 1.5rem;
    font-weight: 700;
    margin: 0;
    line-height: 1.2;
    letter-spacing: -0.02em;
}

.stats-hero__subtitle {
    font-size: 0.875rem;
    margin: 0.25rem 0 0;
    opacity: 0.9;
}

.stats-hero__back-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.625rem 1.25rem;
    background: rgba(255, 255, 255, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: var(--stats-radius-sm);
    color: white;
    font-family: var(--stats-font);
    font-size: 0.875rem;
    font-weight: 600;
    text-decoration: none;
    backdrop-filter: blur(5px);
    transition: all 0.2s ease;
}

.stats-hero__back-btn:hover {
    background: rgba(255, 255, 255, 0.3);
    color: white;
    text-decoration: none;
    transform: translateX(-2px);
}

/* === Statistics Grid === */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1rem;
    margin-bottom: 1.5rem;
}

.stats-card {
    background: var(--stats-surface);
    border: 1px solid var(--stats-border);
    border-radius: var(--stats-radius);
    padding: 1.25rem;
    text-align: center;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.stats-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06);
}

.stats-card__icon {
    width: 44px;
    height: 44px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 0.75rem;
}

.stats-card__icon--primary {
    background: rgba(245, 158, 11, 0.1);
    color: var(--stats-primary);
}

.stats-card__icon--success {
    background: rgba(16, 185, 129, 0.1);
    color: var(--stats-success);
}

.stats-card__icon--info {
    background: rgba(59, 130, 246, 0.1);
    color: var(--stats-info);
}

.stats-card__icon--warning {
    background: rgba(239, 68, 68, 0.1);
    color: var(--stats-danger);
}

.stats-card__value {
    font-size: 2rem;
    font-weight: 700;
    color: var(--stats-text);
    line-height: 1;
    margin-bottom: 0.5rem;
    letter-spacing: -0.02em;
}

.stats-card__label {
    font-size: 0.8125rem;
    font-weight: 600;
    color: var(--stats-text-muted);
}

.stats-card__hint {
    font-size: 0.6875rem;
    color: var(--stats-text-muted);
    opacity: 0.7;
    margin-top: 0.25rem;
}

/* === Sessions Section === */
.stats-sessions {
    background: var(--stats-surface);
    border: 1px solid var(--stats-border);
    border-radius: var(--stats-radius);
    padding: 1.5rem;
    margin-bottom: 1.5rem;
}

.stats-sessions__header {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 1.25rem;
    color: var(--stats-text);
}

.stats-sessions__title {
    font-size: 1.125rem;
    font-weight: 700;
    margin: 0;
    letter-spacing: -0.01em;
}

.stats-sessions__table-wrap {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    margin: 0 -1.5rem;
    padding: 0 1.5rem;
}

/* === Table === */
.stats-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.875rem;
}

.stats-table thead th {
    text-align: left;
    padding: 0.75rem 0.75rem;
    font-weight: 600;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--stats-text-muted);
    border-bottom: 2px solid var(--stats-border);
    white-space: nowrap;
}

.stats-table tbody tr {
    transition: background 0.15s ease;
}

.stats-table tbody tr:hover {
    background: var(--stats-surface-alt);
}

.stats-table tbody td {
    padding: 0.875rem 0.75rem;
    color: var(--stats-text);
    border-bottom: 1px solid var(--stats-border);
    white-space: nowrap;
}

.stats-table tbody tr:last-child td {
    border-bottom: none;
}

.stats-table__type-badge {
    display: inline-block;
    padding: 0.25rem 0.625rem;
    background: var(--stats-surface-alt);
    border: 1px solid var(--stats-border);
    border-radius: 6px;
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--stats-text-muted);
}

.stats-table__score {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    font-weight: 500;
}

.stats-table__score--correct {
    color: var(--stats-success);
    font-weight: 700;
}

.stats-table__score--incorrect {
    color: var(--stats-danger);
    font-weight: 700;
}

/* === Progress Bar === */
.stats-progress {
    display: flex;
    align-items: center;
    gap: 0.625rem;
    min-width: 120px;
}

.stats-progress__bar {
    flex: 1;
    height: 8px;
    background: var(--stats-surface-alt);
    border-radius: 4px;
    overflow: hidden;
}

.stats-progress__fill {
    height: 100%;
    border-radius: 4px;
    transition: width 0.5s ease;
}

.stats-progress__fill--success {
    background: var(--stats-success);
}

.stats-progress__fill--warning {
    background: var(--stats-warning);
}

.stats-progress__fill--danger {
    background: var(--stats-danger);
}

.stats-progress__text {
    font-size: 0.75rem;
    font-weight: 700;
    color: var(--stats-text-muted);
    min-width: 36px;
}

/* === Empty State === */
.stats-sessions__empty {
    text-align: center;
    padding: 2.5rem 1rem;
}

.stats-sessions__empty-icon {
    width: 72px;
    height: 72px;
    background: var(--stats-surface-alt);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 1rem;
    color: var(--stats-text-muted);
}

.stats-sessions__empty-title {
    font-size: 1.125rem;
    font-weight: 700;
    color: var(--stats-text);
    margin: 0 0 0.5rem;
}

.stats-sessions__empty-text {
    font-size: 0.875rem;
    color: var(--stats-text-muted);
    margin: 0;
}

/* === Info Cards === */
.stats-info {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1.5rem;
}

.stats-info__card {
    background: var(--stats-surface);
    border: 1px solid var(--stats-border);
    border-radius: var(--stats-radius);
    padding: 1.5rem;
}

.stats-info__card-header {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 1rem;
}

.stats-info__card-icon {
    width: 40px;
    height: 40px;
    background: rgba(245, 158, 11, 0.1);
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--stats-primary);
    flex-shrink: 0;
}

.stats-info__card-title {
    font-size: 1.0625rem;
    font-weight: 700;
    color: var(--stats-text);
    margin: 0;
    letter-spacing: -0.01em;
}

.stats-info__text {
    font-size: 0.875rem;
    color: var(--stats-text-muted);
    line-height: 1.6;
    margin: 0 0 1rem;
}

.stats-info__subtitle {
    font-size: 0.875rem;
    font-weight: 700;
    color: var(--stats-text);
    margin: 0 0 0.75rem;
}

.stats-info__subtitle--spaced {
    margin-top: 1.25rem;
}

.stats-info__list {
    list-style: none;
    padding: 0;
    margin: 0 0 1rem;
}

.stats-info__list-item {
    display: flex;
    align-items: center;
    gap: 0.625rem;
    padding: 0.5rem 0;
    font-size: 0.875rem;
    color: var(--stats-text);
    line-height: 1.4;
}

.stats-info__list-item svg {
    flex-shrink: 0;
}

/* === Alerts === */
.stats-alert {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    padding: 1rem 1.25rem;
    border-radius: var(--stats-radius-sm);
    font-size: 0.875rem;
    line-height: 1.5;
}

.stats-alert svg {
    flex-shrink: 0;
    margin-top: 1px;
}

.stats-alert--warning {
    background: #fffbeb;
    border: 1px solid #fde68a;
    color: #92400e;
}

.stats-alert--warning svg {
    color: #f59e0b;
}

.stats-alert--info {
    background: #eff6ff;
    border: 1px solid #bfdbfe;
    color: #1e40af;
}

.stats-alert--info svg {
    color: #3b82f6;
}

.stats-alert--success {
    background: #ecfdf5;
    border: 1px solid #a7f3d0;
    color: #065f46;
}

.stats-alert--success svg {
    color: #10b981;
}

/* === Action Buttons === */
.stats-actions {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.stats-actions__btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.625rem;
    padding: 0.75rem 1.25rem;
    border-radius: var(--stats-radius-sm);
    font-family: var(--stats-font);
    font-size: 0.875rem;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.2s ease;
    cursor: pointer;
}

.stats-actions__btn--primary {
    background: var(--stats-surface);
    border: 1px solid var(--stats-primary);
    color: var(--stats-primary-dark);
}

.stats-actions__btn--primary:hover {
    background: rgba(245, 158, 11, 0.08);
    color: var(--stats-primary-dark);
    text-decoration: none;
    transform: translateY(-1px);
}

.stats-actions__btn--success {
    background: var(--stats-surface);
    border: 1px solid var(--stats-success);
    color: #059669;
}

.stats-actions__btn--success:hover {
    background: rgba(16, 185, 129, 0.08);
    color: #059669;
    text-decoration: none;
    transform: translateY(-1px);
}

/* === Animations === */
@keyframes stats-slideUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

.stats-hero { animation: stats-slideUp 0.4s ease-out; }

.slideUp {
    animation: stats-slideUp 0.4s ease-out both;
}

/* === Responsive === */
@media (max-width: 640px) {
    .stats-hero__content {
        flex-direction: column;
        align-items: flex-start;
    }

    .stats-hero__back-btn {
        width: 100%;
        justify-content: center;
    }

    .stats-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .stats-card__value {
        font-size: 1.5rem;
    }

    .stats-sessions {
        padding: 1rem;
    }

    .stats-sessions__table-wrap {
        margin: 0 -1rem;
        padding: 0 1rem;
    }

    .stats-table {
        font-size: 0.8125rem;
    }

    .stats-table thead th {
        font-size: 0.6875rem;
    }

    .stats-info {
        grid-template-columns: 1fr;
    }

    .stats-info__card {
        padding: 1.25rem;
    }
}
</style>
{% endblock %}
